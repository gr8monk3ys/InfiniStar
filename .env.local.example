# ==================================
# InfiniStar Environment Variables
# ==================================
# Copy this file to .env.local and fill in your actual values
# Never commit .env.local to version control!

# ----------------------------------
# Database (Postgres / Neon)
# ----------------------------------
# Neon connection strings
# Get yours at: https://neon.tech/
# Pooled connection string (for app runtime)
DATABASE_URL="postgresql://USER:PASSWORD@HOST/DATABASE?sslmode=require"
# Direct connection string (for migrations)
DIRECT_URL="postgresql://USER:PASSWORD@HOST/DATABASE?sslmode=require"

# ----------------------------------
# Clerk Authentication
# ----------------------------------
# Sign up at: https://clerk.com/
# Create an application and copy your keys
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_your_clerk_publishable_key"
CLERK_SECRET_KEY="sk_test_your_clerk_secret_key"
CLERK_WEBHOOK_SECRET="whsec_your_clerk_webhook_secret"

# Clerk auth page routes
NEXT_PUBLIC_CLERK_SIGN_IN_URL="/sign-in"
NEXT_PUBLIC_CLERK_SIGN_UP_URL="/sign-up"

# Your app's base URL
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ----------------------------------
# Pusher (Real-time Messaging)
# ----------------------------------
# Sign up at: https://pusher.com/
# Create a new Channels app and copy credentials
PUSHER_APP_ID="123456"
PUSHER_SECRET="your_pusher_secret"
NEXT_PUBLIC_PUSHER_APP_KEY="your_pusher_key"
NEXT_PUBLIC_PUSHER_CLUSTER="mt1"

# ----------------------------------
# Web Push (Background Notifications)
# ----------------------------------
# Generate VAPID keys:
#   npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
# Use a contact URL or email as the "subject" claim
VAPID_SUBJECT="mailto:admin@yourdomain.com"

# ----------------------------------
# Stripe (Payments & Subscriptions)
# ----------------------------------
# Get API keys from: https://dashboard.stripe.com/apikeys
STRIPE_API_KEY="sk_test_your_stripe_secret_key"
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_signing_secret"

# Product/Price IDs from Stripe dashboard
STRIPE_PRO_MONTHLY_PLAN_ID="price_your_pro_monthly_price_id"

# ----------------------------------
# Email Service (Postmark)
# ----------------------------------
# Sign up at: https://postmarkapp.com/
POSTMARK_API_TOKEN="your-postmark-server-token"
POSTMARK_SIGN_IN_TEMPLATE="user-welcome"
POSTMARK_ACTIVATION_TEMPLATE="user-activation"
SMTP_FROM="noreply@yourdomain.com"

# ----------------------------------
# Anthropic AI (Claude)
# ----------------------------------
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY="sk-ant-api03-your-anthropic-api-key"

# ----------------------------------
# OpenAI (Optional)
# ----------------------------------
# Used for model-assisted moderation (and optionally other multimodal features).
OPENAI_API_KEY=""
OPENAI_MODERATION_MODEL="omni-moderation-latest"

# ----------------------------------
# AI Usage Limits (Optional)
# ----------------------------------
# Defaults are conservative. Adjust to match your pricing model.
AI_FREE_MONTHLY_MESSAGE_LIMIT="50"
AI_FREE_MONTHLY_TOKEN_QUOTA="200000"
# Set to "0" to disable the PRO fair-use cap (not recommended).
AI_PRO_MONTHLY_COST_CAP_CENTS="800"

# ----------------------------------
# Monitoring (Sentry)
# ----------------------------------
# https://sentry.io/ for DSNs and project settings
SENTRY_DSN="https://examplePublicKey@o0.ingest.sentry.io/0"
NEXT_PUBLIC_SENTRY_DSN="https://examplePublicKey@o0.ingest.sentry.io/0"
SENTRY_ENVIRONMENT="development"
SENTRY_RELEASE=""
SENTRY_ORG=""
SENTRY_PROJECT=""
SENTRY_AUTH_TOKEN=""

# ----------------------------------
# Security Headers / CSP (Optional)
# ----------------------------------
# Override default CSP entirely (advanced use only)
CONTENT_SECURITY_POLICY=""
# Set true/1/yes/on to ship CSP in report-only mode
CONTENT_SECURITY_POLICY_REPORT_ONLY="false"
# Optional endpoint for CSP violation report submissions
CONTENT_SECURITY_POLICY_REPORT_URI=""

# ----------------------------------
# Redis (Optional - for distributed rate limiting & 2FA tokens)
# ----------------------------------
# Required for horizontal scaling. Without Redis, rate limiting and
# 2FA tokens use in-memory storage (fine for single-instance deployments).
# Supports: Redis, Upstash Redis, AWS ElastiCache, etc.
# REDIS_URL="redis://localhost:6379"
# REDIS_URL="rediss://default:your_password@your-redis-host:6380"

# ----------------------------------
# Cron
# ----------------------------------
CRON_SECRET="your_cron_secret"

# ----------------------------------
# Ops / Runbooks (Optional)
# ----------------------------------
STAGING_WEBHOOK_URL="https://staging.yourdomain.com/api/webhooks/stripe"
STRIPE_WEBHOOK_VERIFY_TIMEOUT_MS="15000"
SENTRY_BASE_URL="https://sentry.io"
SENTRY_ALERT_MIN_RULES="2"
DRILL_DATABASE_URL="postgresql://USER:PASSWORD@HOST/DRILL_DATABASE?sslmode=require"
BACKUP_DIR="./tmp/db-drills"
E2E_TEST_EMAIL=""
E2E_TEST_PASSWORD=""
E2E_ASSERT_AUTH_REDIRECTS="false"
E2E_RUN_LIVE_AI="false"

# ----------------------------------
# Monetization (Optional)
# ----------------------------------
NEXT_PUBLIC_ENABLE_AFFILIATE_LINKS="false"
NEXT_PUBLIC_AFFILIATE_ANTHROPIC_URL=""
NEXT_PUBLIC_AFFILIATE_NOTION_URL=""
NEXT_PUBLIC_AFFILIATE_GRAMMARLY_URL=""

NEXT_PUBLIC_ENABLE_ADSENSE="false"
NEXT_PUBLIC_ADSENSE_CLIENT_ID=""
NEXT_PUBLIC_ADSENSE_SLOT_HOME_INLINE=""
NEXT_PUBLIC_ADSENSE_SLOT_PRICING_INLINE=""

# Comma-separated list of emails allowed to access /api/affiliate/summary
AFFILIATE_ANALYTICS_ALLOWED_EMAILS=""
# Comma-separated list of moderation reviewers allowed to list all reports via /api/moderation/reports
MODERATION_REVIEWER_EMAILS=""

# ----------------------------------
# Logging (optional)
# ----------------------------------
# LOG_LEVEL=debug  # Options: debug, info, warn, error (default: debug in dev, info in production)

# ==================================
# Development Tips
# ==================================
# 1. Copy this file: cp .env.local.example .env.local
# 2. Fill in your actual values in .env.local
# 3. Never commit .env.local to git
# 4. See SETUP.md for detailed setup instructions
# 5. Restart your dev server after changing env vars
